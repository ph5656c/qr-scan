<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>線材條碼掃描</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/@zxing/library@latest"></script>
</head>
<body>
<button onclick="startScan()">開始掃描</button>
<input id="result" readonly style="width:100%; margin-top:10px;">

<video id="video" style="width:100%; max-width:320px;" playsinline></video>

<script type="module">
const codeReader = new ZXing.BrowserMultiFormatReader();

function startScan() {
  codeReader.decodeFromVideoDevice(
    null,
    'video',
    (result, err) => {
      if (result) {
        alert(result.text);
        codeReader.reset();
      }
    }
  );
}
  
function sendToAPI(code) {
  fetch("https://script.google.com/macros/s/XXXX/exec", {
    method: "POST",
    body: JSON.stringify({ barcode: code })
  });
}
</script>

</body>
</html>

